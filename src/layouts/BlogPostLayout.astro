---
import BaseLayout from './BaseLayout.astro';
import CollectionCta from '../components/CollectionCta.astro';
import { SITE_NAME } from '../consts';

interface Props {
  title: string;
  pubDate: Date;
  description: string;
  author: string;
  tags?: string[];
  collectionId?: string;
  collectionWords?: string[];
}

const { title, pubDate, description, author, tags = [], collectionId, collectionWords } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout
  title={`${title} â€” ${SITE_NAME} Blog`}
  description={description}
  ogTitle={title}
  ogDescription={description}
  twitterCard="summary_large_image"
  currentPage="blog"
>
  <article class="blog-post">
    <div class="container">
      <div class="blog-post__content">
        <a href="/blog/" class="blog-post__back">&larr; Back to Blog</a>
        <h1>{title}</h1>
        <div class="blog-post__meta">
          <time datetime={pubDate.toISOString()}>{formattedDate}</time>
          <span class="blog-post__author">by {author}</span>
        </div>
        {tags.length > 0 && (
          <div class="blog-post__tags">
            {tags.map((tag) => (
              <span class="blog-post__tag">{tag}</span>
            ))}
          </div>
        )}
        <div class="blog-post__body">
          <slot />
        </div>
        {collectionId && (
          <CollectionCta collectionId={collectionId} words={collectionWords} />
        )}
      </div>
    </div>
  </article>
</BaseLayout>
